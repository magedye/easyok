# ============================================================================
# EasyData - Environment Configuration (REFERENCE TEMPLATE)
# ============================================================================
# This file is the SINGLE SOURCE OF TRUTH for environment structure.
# Copy this file to `.env` and only change variables marked with:
# >>> CHANGE ME <<<
#
# You can fully enable/disable security by toggles below
# WITHOUT changing any code.
# ============================================================================


# ============================================================================
# Application
# ============================================================================
APP_NAME=EasyData
APP_VERSION=16.0.0

# Runtime environment
# Allowed values: development | staging | production
APP_ENV=development

# Debug mode (MUST be false in production)
DEBUG=false


# ============================================================================
# Core Provider Selectors (Single Source of Truth)
# DO NOT branch logic elsewhere
# ============================================================================
DB_PROVIDER=oracle
# Allowed values:
# - oracle
# - mssql

LLM_PROVIDER=groq
# Allowed values:
# - openai
# - google
# - ollama
# - openai_compatible
# - groq

VECTOR_DB=chromadb
# Allowed values:
# - chromadb
# - qdrant

ENABLE_SEMANTIC_CACHE=true
# ============================================================================
# Security Toggles
# Set AUTH_ENABLED=false to run EasyData with NO authentication at all
# ============================================================================
AUTH_ENABLED=false
RBAC_ENABLED=false
RLS_ENABLED=false

# Behavior rules:
# - If AUTH_ENABLED=false:
#     * All requests are allowed
#     * JWT is completely ignored
#     * RBAC and RLS are implicitly disabled
#
# - RBAC_ENABLED controls role-based authorization
# - RLS_ENABLED controls row-level SQL filtering


# ============================================================================
# Feature Toggles (Aspect-Oriented Architecture)
# Each toggle MUST fully disable its concern
# ============================================================================
ENABLE_LOGGING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_RATE_LIMIT=false
ENABLE_GZIP_COMPRESSION=true
ENABLE_PERFORMANCE=true


# ============================================================================
# JWT Configuration (USED ONLY IF AUTH_ENABLED=true)
# EasyData VALIDATES tokens â€“ it NEVER issues them
# ============================================================================
JWT_ALGORITHM=HS256
# Allowed values:
# - HS256 (shared secret)
# - RS256 (public/private key)
# - ES256 (ECDSA)

JWT_SECRET_KEY=A1b2C3d4E5f6G7h8I9j0K1l2M3n4O5p6

# Optional (advanced / production setups)
JWT_PUBLIC_KEY=
JWT_JWKS_URL=

# Token validation
JWT_EXPIRATION_MINUTES=60
JWT_ISSUER=
JWT_AUDIENCE=

# HTTP header settings
JWT_HEADER_NAME=Authorization
JWT_HEADER_PREFIX=Bearer


# ============================================================================
# Authorization / RBAC
# ============================================================================
RBAC_ROLES_CLAIM=roles
RBAC_DEFAULT_ROLE=viewer
RBAC_ADMIN_ROLE=admin


# ============================================================================
# Row Level Security (RLS)
# ============================================================================
RLS_SCOPE_CLAIM=tenant_id

# Behavior when RLS claim is missing:
# - deny  -> block request
# - allow -> ignore RLS filtering
RLS_MISSING_SCOPE_BEHAVIOR=deny


# ============================================================================
# User / Business Database (READ-ONLY ACCESS REQUIRED)
# ============================================================================
ORACLE_CONNECTION_STRING=oracle+oracledb://MAJED:StrongPass123@10.10.10.10:1521/XEPDB1
#ORACLE_CONNECTION_STRING=oracle+oracledb://user:password@host:port/service  <<< CHANGE ME <<<

MSSQL_CONNECTION_STRING=


# Rules:
# - Only ONE connection string is used (based on DB_PROVIDER)
# - Database user MUST be read-only
# - NEVER store system logs here


# ============================================================================
# System Database (Logs / Audit / Metadata ONLY)
# ============================================================================
SYSTEM_DB_TYPE=sqlite
# Allowed values:
# - sqlite   (default, zero configuration)
# - postgres (future / large-scale)

SYSTEM_DB_PATH=./data/logs.db
# Used only when SYSTEM_DB_TYPE=sqlite


# ============================================================================
# Vector Store
# ============================================================================
VECTOR_STORE_PATH=./data/vectorstore

# Qdrant (used only if VECTOR_DB=qdrant)
QDRANT_URL=
QDRANT_API_KEY=


# ============================================================================
# LLM Providers
# Provider used is selected by LLM_PROVIDER above
# ============================================================================

# -------------------------
# OpenAI
# -------------------------
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx   >>> CHANGE ME <<<
OPENAI_MODEL=gpt-4o-mini
OPENAI_TIMEOUT=30

# -------------------------
# Google
# -------------------------
GOOGLE_API_KEY=
GOOGLE_MODEL=gemini-1.5-pro

# -------------------------
# Ollama (Local LLM)
# -------------------------
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3

# -------------------------
# OpenAI-Compatible (PHI-3, etc.)
# -------------------------
PHI3_BASE_URL=http://localhost:1234/v1
PHI3_MODEL=phi-3
PHI3_API_KEY=
PHI3_TIMEOUT=30

# -------------------------
# Groq
# -------------------------
GROQ_API_KEY=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
GROQ_MODEL=llama-3.1-8b-instant
GROQ_TIMEOUT=30


# ============================================================================
# Shared LLM Controls (Deterministic Mode)
# ============================================================================
LLM_TEMPERATURE=0.1
# Allowed values:
# - 0.0 -> fully deterministic
# - 0.1 -> near-deterministic (DEFAULT, RECOMMENDED)

LLM_MAX_TOKENS=2048
LLM_REQUEST_TIMEOUT=60


# ============================================================================
# RAG / Vanna Controls
# ============================================================================
RAG_TOP_K=5
MAX_SQL_TOKENS=2000

# Security-related Vanna limits
VANNA_ALLOW_DDL=false
VANNA_MAX_ROWS=500


# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_SCOPE=user
# Allowed values:
# - user
# - ip
# - global


# ============================================================================
# Health Checks
# ============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5

# Aggregation strategy:
# - strict   -> any failure = unhealthy
# - degraded -> partial failure allowed
HEALTH_AGGREGATION_MODE=degraded


# ============================================================================
# End of File
# ============================================================================
