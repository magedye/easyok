# =============================================================================
# EasyData — Continuous Integration Environment (.env.ci)
# =============================================================================
# GOVERNANCE NOTICE — CI ONLY
# -----------------------------------------------------------------------------
# This environment is used for:
# - Automated tests
# - Schema / contract validation
# - Build verification
#
# STRICT RULES:
# - NO security bypass
# - NO admin escalation
# - NO destructive operations
# - NO dependency on external prod services
#
# Any deviation is a GOVERNANCE VIOLATION.
# =============================================================================


# =============================================================================
# Environment & Identity
# =============================================================================
ENV=ci
APP_ENV=development

APP_NAME=EasyData
APP_VERSION=16.7.x
DEBUG=false


# =============================================================================
# Core Provider Selectors
# =============================================================================
DB_PROVIDER=oracle
LLM_PROVIDER=groq
VECTOR_DB=chromadb


# =============================================================================
# Security Toggles (LOCKED-DOWN)
# =============================================================================
AUTH_ENABLED=true
RBAC_ENABLED=true
RLS_ENABLED=true
ADMIN_LOCAL_BYPASS=false


# =============================================================================
# Feature Toggles (CI-SAFE)
# =============================================================================
ENABLE_LOGGING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_RATE_LIMIT=true
ENABLE_GZIP_COMPRESSION=true
ENABLE_PERFORMANCE=false
ENABLE_TRAINING_PILOT=false
TRAINING_READINESS_ENFORCED=true
ENABLE_RAG_QUALITY=false
EASYDATA_ALLOW_LOCAL_NO_SCHEMA_POLICY=false


# =============================================================================
# JWT Configuration (Validation Only)
# =============================================================================
JWT_ALGORITHM=HS256
JWT_SECRET_KEY=ci-placeholder-secret

JWT_PUBLIC_KEY=
JWT_JWKS_URL=

JWT_EXPIRATION_MINUTES=60
JWT_ISSUER=easydata-ci
JWT_AUDIENCE=easydata-ci

JWT_HEADER_NAME=Authorization
JWT_HEADER_PREFIX=Bearer


# =============================================================================
# RBAC & Authorization
# =============================================================================
RBAC_ROLES_CLAIM=roles
RBAC_DEFAULT_ROLE=viewer
RBAC_ADMIN_ROLE=admin


# =============================================================================
# Row Level Security (RLS)
# =============================================================================
RLS_SCOPE_CLAIM=tenant_id
RLS_MISSING_SCOPE_BEHAVIOR=deny


# =============================================================================
# User / Business Database (CI-SAFE)
# =============================================================================
# CI MUST NOT connect to real production databases
ORACLE_CONNECTION_STRING=

ORACLE_USER=
ORACLE_PASSWORD=
ORACLE_DSN=

MSSQL_CONNECTION_STRING=


# =============================================================================
# System Database (Ephemeral)
# =============================================================================
SYSTEM_DB_TYPE=sqlite
SYSTEM_DB_PATH=./data/ci-logs.db


# =============================================================================
# Vector Store (Ephemeral)
# =============================================================================
VECTOR_STORE_PATH=./data/ci-vectorstore

QDRANT_URL=
QDRANT_API_KEY=


# =============================================================================
# Observability & Tracing (CI-MINIMAL)
# =============================================================================
ENABLE_TELEMETRY=false
ANON_TELEMETRY=false
ENABLE_OTEL=false

OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_SAMPLER_RATIO=0.0
OTEL_SERVICE_NAME=easydata-backend-ci

ENABLE_SIGNOZ_ALERTS=false


# =============================================================================
# Sentry (Disabled in CI Runtime)
# =============================================================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=ci
SENTRY_TRACES_SAMPLE_RATE=0.0
SENTRY_ATTACH_STACKTRACE=false
SENTRY_ENABLE_OTEL_BRIDGE=false

# CI / Release Metadata (Optional)
SENTRY_API_TOKEN=
SENTRY_ORG_SLUG=
SENTRY_PROJECT_SLUG=


# =============================================================================
# LLM Providers (Stubbed / Mocked)
# =============================================================================
# OpenAI
OPENAI_API_KEY=
OPENAI_MODEL=
OPENAI_BASE_URL=
OPENAI_TIMEOUT=30

# Google
GOOGLE_API_KEY=
GOOGLE_MODEL=gemini-1.5-pro

# Ollama (Disabled)
OLLAMA_BASE_URL=
OLLAMA_MODEL=

# Groq (Mock / Disabled)
GROQ_API_KEY=
GROQ_MODEL=llama-3.1-8b-instant
GROQ_TIMEOUT=30

# OpenAI-Compatible / Phi-3 (Optional Mock)
PHI3_BASE_URL=
PHI3_MODEL=phi-3
PHI3_API_KEY=
PHI3_TIMEOUT=30


# =============================================================================
# Shared LLM Controls (Deterministic)
# =============================================================================
LLM_TEMPERATURE=0.0
LLM_MAX_TOKENS=512
LLM_REQUEST_TIMEOUT=30


# =============================================================================
# RAG / Vanna Controls (NON-DESTRUCTIVE)
# =============================================================================
RAG_TOP_K=3
MAX_SQL_TOKENS=1000

VANNA_ALLOW_DDL=false
VANNA_MAX_ROWS=100


# =============================================================================
# Governed Semantic Cache (Disabled)
# =============================================================================
ENABLE_SEMANTIC_CACHE=false

SEMANTIC_CACHE_SIMILARITY_THRESHOLD=0.85
SEMANTIC_CACHE_MAX_RESULTS=3
SEMANTIC_CACHE_TTL_SECONDS=3600
SEMANTIC_CACHE_GOVERNANCE_MODE=revalidate

SEMANTIC_CACHE_STORE_SQL=false
SEMANTIC_CACHE_STORE_RESULTS=false

REDIS_URL=


# =============================================================================
# Admin Feature Governance (READ-ONLY)
# =============================================================================
ADMIN_FEATURE_TOGGLE_API_ENABLED=false
ADMIN_FEATURE_TOGGLE_REQUIRE_REASON=true
ADMIN_FEATURE_TOGGLE_EMIT_OTEL=false


# =============================================================================
# Arabic NLP Pipeline (Enabled for Coverage)
# =============================================================================
ENABLE_ARABIC_NLP=true
ENABLE_CAMEL_TOOLS=true
ENABLE_FARASA=false

FARASA_MODEL_PATH=

ARABIC_EMBEDDING_MODEL=CAMeL-Lab/bert-base-arabic-camelbert-da
ARABIC_PREPROCESS_BEFORE_RAG=true


# =============================================================================
# RAG Quality Governance (RAGAS)
# =============================================================================
ENABLE_RAGAS_EVALUATION=false

RAGAS_METRICS=context_precision,context_recall,faithfulness,answer_relevance
RAGAS_EXECUTION_MODE=async
RAGAS_LINK_TO_AUDIT_LOG=false


# =============================================================================
# Rate Limiting (Enabled)
# =============================================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_SCOPE=global


# =============================================================================
# Health Checks
# =============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5
HEALTH_AGGREGATION_MODE=strict


# =============================================================================
# API Server / Runtime Controls
# =============================================================================
BACKEND_PORT=8000
CORS_ORIGINS=[]
STREAM_PROTOCOL=ndjson
DEFAULT_ROW_LIMIT=100


# =============================================================================
# Sandbox / Shadow Execution
# =============================================================================
SANDBOX_DATA_STRATEGY=schema_only
SANDBOX_SENSITIVE_COLUMNS=[]


# =============================================================================
# End of CI Environment
# =============================================================================
