# ============================================================================
# EasyData â€“ Environment Configuration (.env.example)
# ============================================================================
# GOVERNANCE NOTICE
# -----------------
# This file defines the OFFICIAL environment variable STRUCTURE.
#
# Rules:
# - This file MUST NOT contain real secrets
# - This file MUST be safe to commit and share
# - Runtime secrets are injected via private .env files or secret managers
#
# Usage:
#   1. Copy this file to `.env`
#   2. Replace ONLY values marked with:
#        >>> CHANGE ME <<<
#
# Any deviation from this policy is a GOVERNANCE VIOLATION.
# ============================================================================


# ============================================================================
# Environment
# ============================================================================
ENV=local
APP_NAME=EasyData
APP_VERSION=16.0.0

# Allowed values: development | staging | production
APP_ENV=development

# Debug MUST be false in production
DEBUG=false


# ============================================================================
# Core Provider Selectors (Single Source of Truth)
# ============================================================================
DB_PROVIDER=oracle
# Allowed values:
# - oracle
# - mssql

LLM_PROVIDER=openai_compatible
# Allowed values:
# - openai
# - google
# - ollama
# - openai_compatible
# - groq

VECTOR_DB=chromadb
# Allowed values:
# - chromadb
# - qdrant


# ============================================================================
# Security Toggles
# ============================================================================
# AUTH_ENABLED=false means:
# - Authentication disabled
# - JWT ignored
# - RBAC and RLS disabled
AUTH_ENABLED=false
RBAC_ENABLED=false
RLS_ENABLED=false


# ============================================================================
# Feature Toggles (Aspect-Oriented Governance)
# ============================================================================
ENABLE_LOGGING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_RATE_LIMIT=false
ENABLE_GZIP_COMPRESSION=true
ENABLE_PERFORMANCE=true
ENABLE_TRAINING_PILOT=false


# ============================================================================
# JWT Configuration (USED ONLY IF AUTH_ENABLED=true)
# ============================================================================
JWT_ALGORITHM=HS256
# Allowed values:
# - HS256
# - RS256
# - ES256

JWT_SECRET_KEY=>>> CHANGE ME <<<

JWT_PUBLIC_KEY=
JWT_JWKS_URL=

JWT_EXPIRATION_MINUTES=60
JWT_ISSUER=
JWT_AUDIENCE=

JWT_HEADER_NAME=Authorization
JWT_HEADER_PREFIX=Bearer


# ============================================================================
# Authorization / RBAC
# ============================================================================
RBAC_ROLES_CLAIM=roles
RBAC_DEFAULT_ROLE=viewer
RBAC_ADMIN_ROLE=admin


# ============================================================================
# Row Level Security (RLS)
# ============================================================================
RLS_SCOPE_CLAIM=tenant_id

# Behavior when RLS scope is missing:
# - deny  -> block request
# - allow -> ignore RLS filtering
RLS_MISSING_SCOPE_BEHAVIOR=deny


# ============================================================================
# User / Business Database (READ-ONLY REQUIRED)
# ============================================================================
ORACLE_USER=>>> CHANGE ME <<<
ORACLE_PASSWORD=>>> CHANGE ME <<<
ORACLE_DSN=>>> CHANGE ME <<<

ORACLE_CONNECTION_STRING=>>> CHANGE ME <<<
MSSQL_CONNECTION_STRING=>>> CHANGE ME <<<


# ============================================================================
# System Database (Logs / Audit / Metadata ONLY)
# ============================================================================
SYSTEM_DB_TYPE=sqlite
# Allowed values:
# - sqlite
# - postgres

SYSTEM_DB_PATH=./data/logs.db


# ============================================================================
# Vector Store
# ============================================================================
VECTOR_STORE_PATH=./data/vectorstore

# Qdrant (used only if VECTOR_DB=qdrant)
QDRANT_URL=
QDRANT_API_KEY=>>> CHANGE ME <<<


# ============================================================================
# Observability / Tracing
# ============================================================================
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SAMPLER_RATIO=1.0
OTEL_SERVICE_NAME=easydata-backend

ENABLE_SIGNOZ_ALERTS=false


# ============================================================================
# Sentry (Crash & Exception Tracking)
# ============================================================================
SENTRY_DSN=>>> CHANGE ME <<<
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_ATTACH_STACKTRACE=true
SENTRY_ENABLE_OTEL_BRIDGE=true


# ============================================================================
# LLM Providers
# ============================================================================
# -------------------------
# OpenAI
# -------------------------
OPENAI_API_KEY=>>> CHANGE ME <<<
OPENAI_MODEL=>>> CHANGE ME <<<
OPENAI_BASE_URL=>>> CHANGE ME <<<
OPENAI_TIMEOUT=30

# -------------------------
# Google
# -------------------------
GOOGLE_API_KEY=>>> CHANGE ME <<<
GOOGLE_MODEL=gemini-1.5-pro

# -------------------------
# Ollama
# -------------------------
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3

# -------------------------
# OpenAI-Compatible
# -------------------------
PHI3_BASE_URL=http://localhost:1234/v1
PHI3_MODEL=phi-3
PHI3_API_KEY=>>> CHANGE ME <<<
PHI3_TIMEOUT=30

# -------------------------
# Groq
# -------------------------
GROQ_API_KEY=>>> CHANGE ME <<<
GROQ_MODEL=llama-3.1-8b-instant
GROQ_TIMEOUT=30


# ============================================================================
# Shared LLM Controls (Deterministic Mode)
# ============================================================================
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=2048
LLM_REQUEST_TIMEOUT=60


# ============================================================================
# RAG / Vanna Controls
# ============================================================================
RAG_TOP_K=5
MAX_SQL_TOKENS=2000

VANNA_ALLOW_DDL=false
VANNA_MAX_ROWS=500


# ============================================================================
# Governed Semantic Cache
# ============================================================================
ENABLE_SEMANTIC_CACHE=false

SEMANTIC_CACHE_SIMILARITY_THRESHOLD=0.85
SEMANTIC_CACHE_MAX_RESULTS=3
SEMANTIC_CACHE_TTL_SECONDS=3600

# Governance behavior:
# - revalidate (DEFAULT, REQUIRED)
SEMANTIC_CACHE_GOVERNANCE_MODE=revalidate

SEMANTIC_CACHE_STORE_SQL=true
SEMANTIC_CACHE_STORE_RESULTS=true

REDIS_URL=>>> CHANGE ME <<<


# ============================================================================
# Admin Feature Toggle Governance
# ============================================================================
ADMIN_FEATURE_TOGGLE_API_ENABLED=true
ADMIN_FEATURE_TOGGLE_REQUIRE_REASON=true
ADMIN_FEATURE_TOGGLE_EMIT_OTEL=true


# ============================================================================
# Arabic NLP Pipeline
# ============================================================================
ENABLE_ARABIC_NLP=true
ENABLE_CAMEL_TOOLS=true
ENABLE_FARASA=false

FARASA_MODEL_PATH=>>> CHANGE ME <<<

ARABIC_EMBEDDING_MODEL=CAMeL-Lab/bert-base-arabic-camelbert-da
ARABIC_PREPROCESS_BEFORE_RAG=true


# ============================================================================
# RAG Quality Governance (RAGAS)
# ============================================================================
ENABLE_RAGAS_EVALUATION=false

RAGAS_METRICS=context_precision,context_recall,faithfulness,answer_relevance
RAGAS_EXECUTION_MODE=async
RAGAS_LINK_TO_AUDIT_LOG=true


# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_SCOPE=user
# Allowed values:
# - user
# - ip
# - global


# ============================================================================
# Health Checks
# ============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5

HEALTH_AGGREGATION_MODE=degraded
# Allowed values:
# - strict
# - degraded


# ============================================================================
# End of File
# ============================================================================
