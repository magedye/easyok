# =============================================================================
# EasyData â€” Production Environment (.env.production)
# =============================================================================
# GOVERNANCE NOTICE
# -----------------
# This file is used in PRODUCTION ONLY.
#
# RULES:
# - NO security bypasses
# - NO test flags
# - ALL secrets must be provided explicitly
# - Must comply with policy_guard.py
#
# Edit ONLY values marked with:
#   >>> CHANGE ME <<<
# =============================================================================


# =============================================================================
# Environment & Identity
# =============================================================================
ENV=production
APP_ENV=production

APP_NAME=EasyData
APP_VERSION=16.7.x
DEBUG=false

# Operation Tier
OPERATION_TIER=tier1_governed


# =============================================================================
# Core Provider Selectors
# =============================================================================
DB_PROVIDER=oracle
LLM_PROVIDER=groq
VECTOR_DB=chromadb


# =============================================================================
# Security Toggles (PRODUCTION SAFE)
# =============================================================================
AUTH_ENABLED=true
RBAC_ENABLED=true
RLS_ENABLED=true
ADMIN_LOCAL_BYPASS=false


# =============================================================================
# Feature Toggles
# =============================================================================
ENABLE_LOGGING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_RATE_LIMIT=true
ENABLE_GZIP_COMPRESSION=true
ENABLE_PERFORMANCE=true
ENABLE_TRAINING_PILOT=false
TRAINING_READINESS_ENFORCED=true
ENABLE_RAG_QUALITY=false
EASYDATA_ALLOW_LOCAL_NO_SCHEMA_POLICY=false


# =============================================================================
# JWT Configuration
# =============================================================================
JWT_ALGORITHM=HS256
JWT_SECRET_KEY=>>> CHANGE ME <<<

JWT_PUBLIC_KEY=
JWT_JWKS_URL=

JWT_EXPIRATION_MINUTES=60
JWT_ISSUER=>>> CHANGE ME <<<
JWT_AUDIENCE=>>> CHANGE ME <<<

JWT_HEADER_NAME=Authorization
JWT_HEADER_PREFIX=Bearer


# =============================================================================
# RBAC & Authorization
# =============================================================================
RBAC_ROLES_CLAIM=roles
RBAC_DEFAULT_ROLE=viewer
RBAC_ADMIN_ROLE=admin


# =============================================================================
# Row Level Security (RLS)
# =============================================================================
RLS_SCOPE_CLAIM=tenant_id
RLS_MISSING_SCOPE_BEHAVIOR=deny


# =============================================================================
# User / Business Database
# =============================================================================
# Option A: Full connection string (preferred)
ORACLE_CONNECTION_STRING=>>> CHANGE ME <<<
VANNA_SQLRUNNER_DIALECT=oracle
VANNA_SQLRUNNER_CONNECTION=>>> CHANGE ME <<<

# Option B: Granular components (used only if connection string is empty)
ORACLE_USER=>>> CHANGE ME <<<
ORACLE_PASSWORD=>>> CHANGE ME <<<
ORACLE_HOST=
ORACLE_PORT=
ORACLE_NAME=
ORACLE_DSN=>>> CHANGE ME <<<

MSSQL_CONNECTION_STRING=


# =============================================================================
# System Database (Logs / Audit / Metadata)
# =============================================================================
SYSTEM_DB_TYPE=postgres
SYSTEM_DB_PATH=>>> CHANGE ME <<<


# =============================================================================
# Vector Store
# =============================================================================
VECTOR_STORE_PATH=/var/lib/easydata/vectorstore

QDRANT_URL=
QDRANT_API_KEY=


# =============================================================================
# Observability & Tracing
# =============================================================================
ENABLE_TELEMETRY=true
ANON_TELEMETRY=true
ENABLE_OTEL=true

OTEL_EXPORTER_OTLP_ENDPOINT=>>> CHANGE ME <<<
OTEL_SAMPLER_RATIO=1.0
OTEL_SERVICE_NAME=easydata-backend

ENABLE_SIGNOZ_ALERTS=true


# =============================================================================
# Sentry (Runtime & Release)
# =============================================================================
SENTRY_DSN=>>> CHANGE ME <<<
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_ATTACH_STACKTRACE=true
SENTRY_ENABLE_OTEL_BRIDGE=true

CORS_ORIGINS=["http://localhost:5173","http://localhost:5174","http://localhost:5175","http://10.10.10.10:5173","http://10.10.10.10:5174","http://10.10.10.10:5175"]

# CI / Release Management
SENTRY_API_TOKEN=>>> CHANGE ME <<<
SENTRY_ORG_SLUG=>>> CHANGE ME <<<
SENTRY_PROJECT_SLUG=>>> CHANGE ME <<<


# =============================================================================
# LLM Providers
# =============================================================================
# OpenAI
OPENAI_API_KEY=
OPENAI_MODEL=
OPENAI_BASE_URL=
OPENAI_TIMEOUT=30

# Google
GOOGLE_API_KEY=
GOOGLE_MODEL=gemini-1.5-pro

# Ollama (NOT recommended in production)
OLLAMA_BASE_URL=
OLLAMA_MODEL=

# Groq (Primary)
GROQ_API_KEY=>>> CHANGE ME <<<
GROQ_MODEL=llama-3.1-8b-instant
GROQ_BASE_URL=https://api.groq.com/openai/v1
GROQ_TIMEOUT=30

# OpenAI-Compatible / Phi-3
PHI3_BASE_URL=
PHI3_MODEL=phi-3
PHI3_API_KEY=
PHI3_TIMEOUT=30


# =============================================================================
# Shared LLM Controls
# =============================================================================
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=2048
LLM_REQUEST_TIMEOUT=60


# =============================================================================
# RAG / Vanna Controls
# =============================================================================
RAG_TOP_K=5
MAX_SQL_TOKENS=2000

VANNA_ALLOW_DDL=false
VANNA_MAX_ROWS=500
VANNA_DEFAULT_LIMIT=100
VANNA_MAX_EXECUTION_TIME=30
VANNA_RATE_LIMIT_REQUESTS=100
VANNA_RATE_LIMIT_WINDOW=3600
VANNA_ENABLE_FEEDBACK=true
VANNA_ENABLE_MEMORY=true
VANNA_ENABLE_RICH_OUTPUT=true
VANNA_ENABLE_CHARTS=true
VANNA_DRY_RUN_MODE=false


# =============================================================================
# Governed Semantic Cache
# =============================================================================
ENABLE_SEMANTIC_CACHE=true

SEMANTIC_CACHE_SIMILARITY_THRESHOLD=0.85
SEMANTIC_CACHE_MAX_RESULTS=3
SEMANTIC_CACHE_TTL_SECONDS=3600
SEMANTIC_CACHE_GOVERNANCE_MODE=revalidate

SEMANTIC_CACHE_STORE_SQL=true
SEMANTIC_CACHE_STORE_RESULTS=true

REDIS_URL=>>> CHANGE ME <<<


# =============================================================================
# Admin Feature Governance
# =============================================================================
ADMIN_FEATURE_TOGGLE_API_ENABLED=true
ADMIN_FEATURE_TOGGLE_REQUIRE_REASON=true
ADMIN_FEATURE_TOGGLE_EMIT_OTEL=true


# =============================================================================
# Arabic NLP Pipeline
# =============================================================================
ENABLE_ARABIC_NLP=true
ENABLE_CAMEL_TOOLS=true
ENABLE_FARASA=false

FARASA_MODEL_PATH=

ARABIC_EMBEDDING_MODEL=CAMeL-Lab/bert-base-arabic-camelbert-da
ARABIC_PREPROCESS_BEFORE_RAG=true


# =============================================================================
# RAG Quality Governance (RAGAS)
# =============================================================================
ENABLE_RAGAS_EVALUATION=false

RAGAS_METRICS=context_precision,context_recall,faithfulness,answer_relevance
RAGAS_EXECUTION_MODE=async
RAGAS_LINK_TO_AUDIT_LOG=true


# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_SCOPE=user


# =============================================================================
# Health Checks
# =============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5
HEALTH_AGGREGATION_MODE=degraded


# =============================================================================
# API Server / Runtime Controls
# =============================================================================
BACKEND_PORT=8000
CORS_ORIGINS=[]
STREAM_PROTOCOL=ndjson
DEFAULT_ROW_LIMIT=100


# =============================================================================
# Sandbox / Shadow Execution
# =============================================================================
SANDBOX_DATA_STRATEGY=schema_only
SANDBOX_SENSITIVE_COLUMNS=[]


# =============================================================================
# End of Production Environment
# =============================================================================
